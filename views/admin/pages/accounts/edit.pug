extends ../../layouts/default.pug
include ../../mixins/alert.pug

block main
  h1.mb-4 Chỉnh sửa

  +alert-error(5000)
  +alert-success(5000)

  if roles
    form(
      action=`${prefixAdmin}/accounts/edit/${data.id}?_method=PATCH`
      method="POST"
      enctype="multipart/form-data"
    )
      .form-group
        label(for="fullName") Họ tên *
        input#fullName.form-control(
          type="text"
          name="fullName"
          value=data.fullName
          required
        )

      .form-group
        label(for="email") Email *
        input#email.form-control(
          type="email"
          name="email"
          value=data.email
          required
        )

      .form-group
        label(for="password") Mật khẩu *
        input#password.form-control(
          type="password"
          name="password"
         
        )

      .form-group
        label(for="phone") Số điện thoại
        input#phone.form-control(
          type="text"
          name="phone"
          value=data.phone
        )

      .form-group.upload-image
        label(for="avatar") Avatar
        input#avatar.form-control-file(
          type="file"
          name="avatar"
          accept="image/*"
          upload-image-input
        )
        if data.avatar
          img.image-preview(
            src=data.avatar
            upload-image-preview
          )

      .form-group
        label(for="role_id") Phân quyền
        select#role_id.form-control(name="role_id")
          option(disabled selected=!(data.role_id)) -- Chọn --
          each item in roles
            option(
              value=item.id
              selected=(item.id == data.role_id)
            ) #{item.title}

      .form-group
        label Trạng thái
        .form-check.form-check-inline
          input#statusActive.form-check-input(
            type="radio"
            name="status"
            value="active"
            checked=(data.status === "active")
          )
          label.form-check-label(for="statusActive") Hoạt động

        .form-check.form-check-inline
          input#statusInactive.form-check-input(
            type="radio"
            name="status"
            value="inactive"
            checked=(data.status === "inactive")
          )
          label.form-check-label(for="statusInactive") Dừng hoạt động

      .form-group
        button.btn.btn-primary(type="submit") Cập nhật
  else
    p Vui lòng tạo nhóm quyền trước khi cập nhật tài khoản
    p
      a.btn.btn-secondary(href=`${prefixAdmin}/roles/create`) Tạo nhóm quyền
